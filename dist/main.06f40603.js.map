{"version":3,"sources":["main.js"],"names":["hashMAp","JSON","parse","localStorage","getItem","$liList","$","isTouchDevice","document","documentElement","formatUrl","url","str","replace","render","find","remove","forEach","element","i","$li","logo","insertBefore","timeOutEvent","on","touchstart","e","setTimeout","$currentTarget","currentTarget","removeClass","preventDefault","touchmove","clearTimeout","touchend","hideMask","target","className","stopPropagation","splice","setItem","stringify","addClass","window","location","href","$liPC","length","newUrl","prompt","console","log","toUpperCase","indexOf","push"],"mappings":"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","file":"main.06f40603.js","sourceRoot":"..\\src","sourcesContent":["\r\nlet hashMAp = JSON.parse(localStorage.getItem('siteMap') || '[]');\r\nlet $liList = $('.siteList');\r\nlet isTouchDevice = 'ontouchstart' in document.documentElement; //true 为移动端\r\n\r\nfunction formatUrl(url) {\r\n    let str = url.replace(/^http:\\/\\//, '').replace(/^https:\\/\\//, '').replace(/www\\./, '')\r\n        .replace(/\\/.*/, '')\r\n    return str\r\n}\r\n\r\nlet render = () => {\r\n    $liList.find('li:not(.last)').remove();\r\n    hashMAp.forEach((element, i) => {\r\n\r\n        if (isTouchDevice) {\r\n            let $li = $(`<li class=\"site\" data-item=${i}>\r\n                <div class=\"mask hide\">\r\n                    <button class=\"delete\">删除</button>\r\n                </div>\r\n                <div class=\"logo\">${element.logo}</div>\r\n                <div class=\"url\">${formatUrl(element.url)}</div></li>`);\r\n\r\n            $li.insertBefore($('li.last'));\r\n            //长按可删除\r\n            let timeOutEvent = 0;\r\n            $li.on({\r\n                touchstart: function (e) {\r\n                    timeOutEvent = setTimeout(function () {\r\n                        timeOutEvent = 0;\r\n                        let $currentTarget = $(e.currentTarget)\r\n                        $currentTarget.find('.mask').removeClass('hide')\r\n                    }, 500);\r\n                    e.preventDefault();\r\n                },\r\n                touchmove: function () {\r\n                    clearTimeout(timeOutEvent);\r\n                    timeOutEvent = 0;\r\n                },\r\n                touchend: function (e) {\r\n                    clearTimeout(timeOutEvent);\r\n                    let hideMask = true;\r\n                    //处理删除事件\r\n                    if (e.target.className === 'delete') {\r\n                        hideMask = false;\r\n                        e.stopPropagation();\r\n                        hashMAp.splice(i, 1);\r\n                        localStorage.setItem('siteMap', JSON.stringify(hashMAp))\r\n                        render()\r\n                    } else if (e.target.className === 'mask') {\r\n                        // 取消删除\r\n                        $(e.currentTarget).find('.mask').addClass('hide');\r\n                    } else {\r\n                        // 点击事件 跳转\r\n                        if (timeOutEvent != 0) {\r\n                            window.location.href = element.url\r\n                        }\r\n                        return false;\r\n                    }\r\n                }\r\n            })\r\n\r\n        } else {\r\n            //PC端 hover可删除\r\n            let $liPC = $(`<li class=\"site\" data-item=${i}>\r\n                <div class=\"edit\">\r\n                    <div>\r\n                        <svg class=\"icon\">\r\n                            <use xlink:href=\"#icon-close\"></use>\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n                <div class=\"logo\">${element.logo}</div>\r\n                <div class=\"url\">${formatUrl(element.url)}</div></li>`);\r\n\r\n            $liPC.insertBefore($('li.last'));\r\n            $liPC.on('click', () => {\r\n                window.location.href = element.url\r\n            })\r\n            $liPC.on('click', '.edit', (e) => {\r\n                e.stopPropagation();\r\n                hashMAp.splice(i, 1);\r\n                localStorage.setItem('siteMap', JSON.stringify(hashMAp))\r\n                render()\r\n            })\r\n        }\r\n    });\r\n\r\n}\r\n\r\nif (hashMAp.length !== 0) {\r\n    render()\r\n}\r\n\r\n$('.last').on('click', () => {\r\n    let newUrl = window.prompt('请输入添加的网址');\r\n    console.log(newUrl)\r\n    // 如果点取消，返回null；未填写返回空\r\n    if (!newUrl || newUrl.length === 0)\r\n        return;\r\n    let logo = formatUrl(newUrl)[0].toUpperCase();\r\n    if (newUrl.indexOf('http') !== 0) {\r\n        newUrl = 'https://' + newUrl\r\n    }\r\n    hashMAp.push({ logo: logo, url: newUrl })\r\n    localStorage.setItem('siteMap', JSON.stringify(hashMAp))\r\n    render()\r\n})\r\n\r\n"]}